<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixed Favorites System - Perfume Website</title>

    <!-- Load the unified favorites theme -->
    <link rel="stylesheet" href="favorites_theme.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Geist+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            color: #ffffff;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .demo-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #ffd700, #d4af37);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
        }

        .demo-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 32px;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px;
            margin-bottom: 60px;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .product-card:hover {
            border-color: rgba(212, 175, 55, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .product-image {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
            border-radius: 15px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: rgba(212, 175, 55, 0.6);
        }

        .product-info {
            text-align: center;
            margin-bottom: 25px;
        }

        .product-name {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .product-brand {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 12px;
        }

        .product-price {
            font-size: 1.2rem;
            font-weight: 700;
            color: #d4af37;
        }

        .status-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 40px;
        }

        .status-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .status-item {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.8);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #28a745;
        }

        .controls-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 40px;
        }

        .controls-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 12px 16px;
            color: #ffffff;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(212, 175, 55, 0.4);
        }

        .user-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid rgba(40, 167, 69, 0.4);
            border-radius: 20px;
            padding: 6px 12px;
            font-size: 0.8rem;
            font-weight: 500;
            color: #28a745;
        }

        .user-status.logged-out {
            background: rgba(220, 53, 69, 0.2);
            border-color: rgba(220, 53, 69, 0.4);
            color: #dc3545;
        }

        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .controls-grid {
                grid-template-columns: 1fr;
            }

            .demo-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <!-- Header -->
        <div class="demo-header">
            <h1 class="demo-title">Fixed Favorites System</h1>
            <p class="demo-subtitle">Clean, consistent, and bug-free favorites buttons for your perfume website</p>
            <div class="user-status" id="userStatus">
                <span>üîì</span>
                <span id="statusText">Logged In</span>
            </div>
        </div>

        <!-- Status Panel -->
        <div class="status-panel">
            <div class="status-title">
                <span>üìä</span>
                <span>System Status</span>
            </div>
            <ul class="status-list">
                <li class="status-item">
                    <div class="status-dot"></div>
                    <span>CSS conflicts resolved - unified styling system</span>
                </li>
                <li class="status-item">
                    <div class="status-dot"></div>
                    <span>Theme consistency across all product sections</span>
                </li>
                <li class="status-item">
                    <div class="status-dot"></div>
                    <span>Proper z-index and positioning fixed</span>
                </li>
                <li class="status-item">
                    <div class="status-dot"></div>
                    <span>Responsive design for all screen sizes</span>
                </li>
                <li class="status-item">
                    <div class="status-dot"></div>
                    <span>Accessibility improvements implemented</span>
                </li>
            </ul>
        </div>

        <!-- Product Grid -->
        <div class="product-grid">
            <!-- Layton Product Card -->
            <div class="product-card">
                <div class="product-image">üåø</div>
                <div class="product-info">
                    <div class="product-name">Layton</div>
                    <div class="product-brand">Parfums de Marly</div>
                    <div class="product-price">$195.00</div>
                </div>

                <!-- Fixed Favorites Button -->
                <div class="favorite-btn-middle-container">
                    <button class="favorite-btn" data-product="layton" id="laytonFavoriteBtn">
                        <div class="favorite-icon">
                            <svg class="heart-outline" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                            <svg class="heart-filled" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                        </div>
                        <span class="favorite-text">Add to Favourites</span>
                    </button>
                </div>
            </div>

            <!-- Haltane Product Card -->
            <div class="product-card">
                <div class="product-image">üî•</div>
                <div class="product-info">
                    <div class="product-name">Haltane</div>
                    <div class="product-brand">Parfums de Marly</div>
                    <div class="product-price">$210.00</div>
                </div>

                <!-- Fixed Favorites Button -->
                <div class="favorite-btn-middle-container">
                    <button class="favorite-btn favorited" data-product="haltane" id="haltaneFavoriteBtn">
                        <div class="favorite-icon">
                            <svg class="heart-outline" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                            <svg class="heart-filled" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                        </div>
                        <span class="favorite-text">Favourited</span>
                    </button>
                </div>
            </div>

            <!-- Pegasus Product Card -->
            <div class="product-card pegasus-section">
                <div class="product-image">‚ö°</div>
                <div class="product-info">
                    <div class="product-name">Pegasus</div>
                    <div class="product-brand">Parfums de Marly</div>
                    <div class="product-price">$185.00</div>
                </div>

                <!-- Fixed Favorites Button -->
                <div class="favorite-btn-middle-container">
                    <button class="favorite-btn" data-product="pegasus" id="pegasusFavoriteBtn">
                        <div class="favorite-icon">
                            <svg class="heart-outline" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                            <svg class="heart-filled" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                        </div>
                        <span class="favorite-text">Add to Favourites</span>
                    </button>
                </div>
            </div>

            <!-- Greenly Product Card -->
            <div class="product-card greenly-section">
                <div class="product-image">üå±</div>
                <div class="product-info">
                    <div class="product-name">Greenly</div>
                    <div class="product-brand">Parfums de Marly</div>
                    <div class="product-price">$165.00</div>
                </div>

                <!-- Fixed Favorites Button -->
                <div class="favorite-btn-middle-container">
                    <button class="favorite-btn" data-product="greenly" id="greenlyFavoriteBtn">
                        <div class="favorite-icon">
                            <svg class="heart-outline" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                            <svg class="heart-filled" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                        </div>
                        <span class="favorite-text">Add to Favourites</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Controls Panel -->
        <div class="controls-panel">
            <div class="controls-title">
                <span>üéÆ</span>
                <span>Interactive Controls</span>
            </div>
            <div class="controls-grid">
                <button class="control-btn" onclick="toggleFavorite('layton')">
                    <span>‚ù§Ô∏è</span>
                    <span>Toggle Layton</span>
                </button>
                <button class="control-btn" onclick="toggleFavorite('haltane')">
                    <span>üíñ</span>
                    <span>Toggle Haltane</span>
                </button>
                <button class="control-btn" onclick="toggleFavorite('pegasus')">
                    <span>‚ö°</span>
                    <span>Toggle Pegasus</span>
                </button>
                <button class="control-btn" onclick="toggleFavorite('greenly')">
                    <span>üå±</span>
                    <span>Toggle Greenly</span>
                </button>
                <button class="control-btn" onclick="simulateLoading()">
                    <span>‚è≥</span>
                    <span>Test Loading</span>
                </button>
                <button class="control-btn" onclick="toggleUserLogin()">
                    <span>üîê</span>
                    <span>Toggle Login</span>
                </button>
                <button class="control-btn" onclick="clearAllFavorites()">
                    <span>üßπ</span>
                    <span>Clear All</span>
                </button>
                <button class="control-btn" onclick="favoriteAll()">
                    <span>üíØ</span>
                    <span>Favorite All</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Simulate user login state
        let isLoggedIn = true;
        let favorites = ['haltane']; // Start with haltane favorited

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Favorites system initialized');
            updateUserStatus();
            updateAllButtons();
        });

        // Toggle favorite functionality
        function toggleFavorite(productId) {
            const btn = document.getElementById(productId + 'FavoriteBtn');
            if (!btn) return;

            if (!isLoggedIn) {
                showLoginPrompt();
                return;
            }

            // Add loading state
            btn.classList.add('loading');
            btn.disabled = true;

            // Simulate API call delay
            setTimeout(() => {
                const isFavorited = favorites.includes(productId);

                if (isFavorited) {
                    // Remove from favorites
                    favorites = favorites.filter(id => id !== productId);
                    btn.classList.remove('favorited', 'active');
                    btn.querySelector('.favorite-text').textContent = 'Add to Favourites';
                    console.log(`üíî Removed ${productId} from favorites`);
                } else {
                    // Add to favorites
                    favorites.push(productId);
                    btn.classList.add('favorited', 'active');
                    btn.querySelector('.favorite-text').textContent = 'Favourited';
                    console.log(`‚ù§Ô∏è Added ${productId} to favorites`);

                    // Add heartbeat animation
                    btn.classList.add('heartbeat');
                    setTimeout(() => btn.classList.remove('heartbeat'), 600);
                }

                // Remove loading state
                btn.classList.remove('loading');
                btn.disabled = false;

                // Add pulse animation
                btn.classList.add('animate');
                setTimeout(() => btn.classList.remove('animate'), 300);

                console.log('üìä Current favorites:', favorites);
            }, 500);
        }

        // Simulate loading state
        function simulateLoading() {
            const buttons = document.querySelectorAll('.favorite-btn');
            buttons.forEach(btn => {
                btn.classList.add('loading');
                btn.disabled = true;
            });

            setTimeout(() => {
                buttons.forEach(btn => {
                    btn.classList.remove('loading');
                    btn.disabled = false;
                });
                console.log('‚úÖ Loading simulation completed');
            }, 2000);
        }

        // Toggle user login state
        function toggleUserLogin() {
            isLoggedIn = !isLoggedIn;
            updateUserStatus();
            updateAllButtons();
            console.log(`üîê User ${isLoggedIn ? 'logged in' : 'logged out'}`);
        }

        // Update user status display
        function updateUserStatus() {
            const statusElement = document.getElementById('userStatus');
            const statusText = document.getElementById('statusText');

            if (isLoggedIn) {
                statusElement.classList.remove('logged-out');
                statusElement.querySelector('span').textContent = 'üîì';
                statusText.textContent = 'Logged In';
            } else {
                statusElement.classList.add('logged-out');
                statusElement.querySelector('span').textContent = 'üîí';
                statusText.textContent = 'Logged Out';
            }
        }

        // Update all button states
        function updateAllButtons() {
            const buttons = document.querySelectorAll('.favorite-btn');

            buttons.forEach(btn => {
                const productId = btn.dataset.product;

                if (!isLoggedIn) {
                    btn.classList.add('locked');
                    btn.classList.remove('favorited', 'active');
                } else {
                    btn.classList.remove('locked');

                    if (favorites.includes(productId)) {
                        btn.classList.add('favorited', 'active');
                        btn.querySelector('.favorite-text').textContent = 'Favourited';
                    } else {
                        btn.classList.remove('favorited', 'active');
                        btn.querySelector('.favorite-text').textContent = 'Add to Favourites';
                    }
                }
            });
        }

        // Clear all favorites
        function clearAllFavorites() {
            favorites = [];
            updateAllButtons();
            console.log('üßπ All favorites cleared');
        }

        // Favorite all products
        function favoriteAll() {
            if (!isLoggedIn) {
                showLoginPrompt();
                return;
            }

            favorites = ['layton', 'haltane', 'pegasus', 'greenly'];
            updateAllButtons();

            // Add staggered animations
            const buttons = document.querySelectorAll('.favorite-btn');
            buttons.forEach((btn, index) => {
                setTimeout(() => {
                    btn.classList.add('animate', 'heartbeat');
                    setTimeout(() => btn.classList.remove('animate', 'heartbeat'), 600);
                }, index * 150);
            });

            console.log('üíØ All products favorited');
        }

        // Show login prompt (simplified version)
        function showLoginPrompt() {
            alert('üîí Please log in to save your favorites!\n\nClick "Toggle Login" to simulate logging in.');
        }

        // Add click event listeners to all favorite buttons
        document.querySelectorAll('.favorite-btn').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                const productId = this.dataset.product;
                if (productId) {
                    toggleFavorite(productId);
                }
            });
        });

        // Add keyboard support
        document.querySelectorAll('.favorite-btn').forEach(btn => {
            btn.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.click();
                }
            });
        });

        console.log('üíé Fixed Favorites System Loaded Successfully!');
        console.log('üîß Features:');
        console.log('   ‚úÖ Unified CSS styling');
        console.log('   ‚úÖ Consistent behavior across themes');
        console.log('   ‚úÖ Proper state management');
        console.log('   ‚úÖ Smooth animations');
        console.log('   ‚úÖ Loading states');
        console.log('   ‚úÖ Login/logout handling');
        console.log('   ‚úÖ Accessibility support');
        console.log('   ‚úÖ Responsive design');
    </script>
</body>
</html>
